#### 引用类型（Reference Types）

- string：字符串
- bytes：动态大小字节数组
- Array：数组
- Structs：结构体

引用类型赋值时，可以是值传递，也可以是引用即地址传递。

- 值传递时，修改新变量时，不会影响原来的变量值

- 引用传递时，当修改新变量时，原来变量的值会跟着变化

#### Memory值传递

引用类型变量有两种类型：值传递（memory 深拷贝）以及指针传递（storage浅拷贝）。引用类型作为函数参数时，传递的默认类型为memory，，函数参数为memory类型的变量给一个变量赋值时，这个变量的类型必须和函数参数类型一致。

任何函数参数当它的类型为引用类型时，这个函数参数都默认为memory类型，memory类型的变量会临时拷贝一份值存储到内存中，当我们将这个参数值赋给一个新的变量，并尝试去修改这个新的变量的值时，最原始的变量的值并不会变化。

#### Storage指针传递

作为函数定义时的形式参数传递，默认传递的类型为Memory即值传递，而Storage类型的函数参数是指针传递。

如果想要在某个函数中通过传递过来的指针修改某一个全局变量的值，则必须将函数参数的类型显示的设置为storage类型，storage类型拷贝的不是值，二是对应变量的指针，当调用某个函数时，就会以指针的形式传递进入函数。

#### 函数的权限可见度默认为public类型，但是当函数定义的参数列表中如果有storage类型时，函数的类型必须为internal或者private。

#### String字符串

字符串可以通过""来表示字符串的值，Solidity中的string字符串不像C语言中一样以\0结束，字符串的长度就为我们所看见的字母的个数。

- String字符串不能通过length方法获取其长度。
- String字符串其实是一个特殊的可变字节数组。

#### Bytes动态大小字节数组

- Bytes动态字节数组。
- String是一个特殊的可变字节数组。

- 字母，数字，特殊符号，每一位对应一个字节byt。一个汉字占3个字节大小存储位置。

- Bytes可变数组可使用length和push方法。length返回字节数组的长度，push方法用于向可变数组中添加新元素。

#### 固定大小字节数组，动态大小字节数组，字符串之间的转换

- 当bytes9转bytes1或者bytes2时，会进行低位截断。
- 当bytes9转为bytes32时会以0进行低位补齐。
- 固定大小的字节数组不能直接转换成动态大小字节数组，需要重新申请动态bytes数组，然后for循环赋值。

#### 动态大小字节数组转string

String是特殊的动态字节数组，所以string只能和动态大小字节数组之间进行转换，不能和固定大小字节数组进行转换。

String本质是一个特殊的动态字节数组，所以它只能和bytes两者之间进行转换，不能和固定大小字节数组进行直接转换，如果是固定字节大小数组，需要将其转换为动态字节大小数组才能进行转换。

#### 固定大小字节数组转换为string

固定大小字节数组不能直接转换为String。需要先将字节数组转换为动态字节数组，再转为字符串。

#### 数组

数组可以声明时指定长度，也可以是动态变长。对Storage存储的数组来说，元素类型可以是任意的，类型可以是数组，映射类型，结构体等。但对于Memory的数组来说，如果作为public函数的参数，它不能是映射类型的数组，只能是支持ABI的类型。固定长度的数组只是不可能修改其长度，不过可以修改它内部的值。而bytes0～bytes32固定大小字节数组中，大小固定，内容固定，长度和字节均不可修改。

#### 固定长度的数组Arrays

固定长度的数组不可修改它的长度，不过可以修改它内部的值，而bytes0～bytes32固定大小字节数组中，大小固定，内容固定，长度和字节均不可修改。

固定大小的数组不能调用push方法向里面添加存储内容，声明一个固定长度的数组，比如：uint［5］ T，数组里面的默认值是［0，0，0，0，0］，我们可以通过索引修改里面的值内容，但是不可修改数组长度以及不能调用push方法添加存储内容。

#### 可变长度的Arrays

uint [] t = [1,2,3,4,5]，这句话代表了一个可变长度的t数组，因为我们给其初始化了5个无符号整数，所以其长度为5。

对于可变长度的数组而言，可以通过length修改它的长度，也可以修改元素值。也能通过push向其中添加元素数据，调用push后其长度length数值增加1。

#### 创建Memory Arrays

创建一个长度为length的memory类型的数组可以通过new关键字来创建。memory数组一旦创建，不可以通过length修改长度。

Memory类型的固定长度的数组不可直接赋值给storage/memory类型的可变数组。

#### 数组字面量Array Literals /内联函数 Inline Arrays

#### 结构体

类比Java的Class

#### 总结

- 当引用类型作为函数参数时，类型默认为memory
- 当引用类型作为局部变量时，类型默认是memory
- 当引用类型作为状态变量时，类型默认是storage
- 当引用类型作为函数参数指定为storage类型时，函数类型必须为internal或者private

